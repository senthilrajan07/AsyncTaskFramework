name: PMD run
on:
    pull_request:
        types: [opened]
jobs:
    pmd-run:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout repository
              uses: actions/checkout@v4
            - name: Setup Java
              uses: actions/setup-java@v4
              with:
                distribution: 'temurin'
                java-version: '11'
            - name: PMD action
              uses: pmd/pmd-github-action@v2
              id: pmd
              with:
                rulesets: 'ruleset.xml'
            - name: Fail build if there are violations
              if: steps.pmd.outputs.violations != 0
              run: exit 1